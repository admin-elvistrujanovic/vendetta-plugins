(function(p,k,D,E,B){"use strict";function _(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function v(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function P(e,n,r){return n&&v(e.prototype,n),r&&v(e,r),e}function d(e,n){return d=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},d(e,n)}function w(e,n){return d(e,n)}function O(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&w(e,n)}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function c(e,n,r){return C()?c=Reflect.construct:c=function(o,u,s){var m=[null];m.push.apply(m,u);var Y=Function.bind.apply(o,m),R=new Y;return s&&w(R,s.prototype),R},c.apply(null,arguments)}function N(e,n,r){return c.apply(null,arguments)}function q(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},y(e)}function g(e){return y(e)}function h(e){var n=typeof Map=="function"?new Map:void 0;return h=function(t){if(t===null||!q(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(t))return n.get(t);n.set(t,o)}function o(){return N(t,arguments,g(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),w(o,t)},h(e)}function A(e){return h(e)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return e&&e.constructor===Symbol?"symbol":typeof e}function T(e,n){return n&&(I(n)==="object"||typeof n=="function")?n:x(e)}function S(e){var n=F();return function(){var t=g(e),o;if(n){var u=g(this).constructor;o=Reflect.construct(t,arguments,u)}else o=t.apply(this,arguments);return T(this,o)}}function V(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function t(){if(this instanceof t){var o=[null];o.push.apply(o,arguments);var u=Function.bind.apply(n,o);return new u}return n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}),r}function G(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var j={};(function(e){const n=E,r=B;n.readdirSync(__dirname).filter(function(t){return t!=="index.js"}).forEach(function(t){const o=r.parse(t).name;e[o]=G(r.join(__dirname,t))})})(j);const{React:l}=require("Vendetta/webpack"),{SwitchItem:W}=require("Vendetta/components/settings"),z=require("./PluginList.jsx");module.exports=function(e){O(r,e);var n=S(r);function r(t){return _(this,r),n.call(this,t)}return P(r,[{key:"render",value:function(){var t=this;return l.createElement("div",null,l.createElement(W,{value:this.props.getSetting("disableWhenStopFailed"),onChange:function(){return t.props.toggleSetting("disableWhenStopFailed")}},"Disable plugin when failed to stop"),l.createElement(z,{pluginManager:window.pluginModule}))}}]),r}(l.Component);var J=Object.freeze({__proto__:null}),L=V(J);const{Plugin:U}=k,$=D,{AddonAPI:M,BDApi:i,BDV2:H,ContentManager:K,VendettaPluginManager:Z}=j,Q=L;var X=function(e){O(r,e);var n=S(r);function r(){return _(this,r),n.apply(this,arguments)}return P(r,[{key:"start",value:function(){this.loadStylesheet(__dirname+"/style.css"),this.defineGlobals(),this.registerSettings("bdCompat",{category:"bdCompat",label:"BetterDiscord Plugins",render:Q})}},{key:"unload",value:function(){this.unregisterSettings("bdCompat"),window.pluginModule&&window.pluginModule.destroy(),window.ContentManager&&window.ContentManager.destroy(),this.destroyGlobals()}},{key:"defineGlobals",value:function(){let t;window.webpackChunkdiscord_app.push([["bdCompat"],{},function(o){return t=o}]),window.webpackJsonp=[],window.webpackJsonp.push=function(o){let[,u,[[s]]]=o;return u[s]({},{},t)},window.bdConfig={dataPath:__dirname},window.settingsCookie={},window.bdplugins={},window.pluginCookie={},window.bdpluginErrors=[],window.bdthemes={},window.themeCookie={},window.bdthemeErrors=[],window.BdApi={},Object.getOwnPropertyNames(i).filter(function(o){return typeof i[o]=="function"||typeof i[o]=="object"}).forEach(function(o){window.BdApi[o]=i[o]}),window.Utils={monkeyPatch:i.monkeyPatch,suppressErrors:i.suppressErrors,escapeID:i.escapeID},window.BDV2=H,window.ContentManager=new K,window.pluginModule=new PluginManager(window.ContentManager.pluginsFolder,this.settings),$.env.injDir=__dirname,window.BdApi.Plugins=new M(window.bdplugins,window.pluginModule),window.BdApi.Themes=new M({},{}),this.log("Defined BetterDiscord globals")}},{key:"destroyGlobals",value:function(){["bdConfig"].forEach(function(t){return delete window[t]}),this.log("Destroyed BetterDiscord globals")}}]),r}(A(U));return p.default=X,Object.defineProperty(p,"__esModule",{value:!0}),p})({},f,b,s$1,a);
